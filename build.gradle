group 'cohttp'
version '1.0-SNAPSHOT'

buildscript {
    ext.kotlin_version = '1.1.3'

    repositories {
        mavenLocal()
        maven{ url 'http://172.16.5.35:8081/nexus/content/groups/public/' }
    }
    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
    }
}

apply plugin: 'java'
apply plugin: 'kotlin'
apply plugin: 'maven'

sourceCompatibility = 1.8

ext.externalLibs = new File(rootProject.rootDir, 'libs').getAbsolutePath()
ext.externalLibsJarTree = fileTree(dir: externalLibs, include: '**/*.jar')

repositories {
    mavenLocal()
    maven{ url 'http://172.16.5.35:8081/nexus/content/groups/public/' }
}

dependencies {
    compile externalLibsJarTree

    compile gradleApi()
    compile 'org.ow2.asm:asm-debug-all:5.2'
    compile "org.jetbrains.kotlin:kotlin-stdlib-jre8:$kotlin_version"
    testCompile group: 'junit', name: 'junit', version: '4.12'
}

compileKotlin {
    kotlinOptions.jvmTarget = "1.8"
}

compileTestKotlin {
    kotlinOptions.jvmTarget = "1.8"
}

uploadArchives {
    repositories { flatDir { name 'localRepository' } }
    repositories { localRepository { dirs './local-repo' } }
}